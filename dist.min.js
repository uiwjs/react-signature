/*! For license information please see dist.min.js.LICENSE.txt */
!function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("react")):"function"===typeof define&&define.amd?define(["react"],t):"object"===typeof exports?exports["@uiw/react-signature"]=t(require("react")):e["@uiw/react-signature"]=t(e.React)}(self,(e=>(()=>{"use strict";var t={426:(e,t,n)=>{var r=n(787),o=Symbol.for("react.element"),i=Symbol.for("react.fragment"),u=Object.prototype.hasOwnProperty,c=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function a(e,t,n){var r,i={},a=null,f=null;for(r in void 0!==n&&(a=""+n),void 0!==t.key&&(a=""+t.key),void 0!==t.ref&&(f=t.ref),t)u.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:o,type:e,key:a,ref:f,props:i,_owner:c.current}}t.jsx=a,t.jsxs=a},246:(e,t,n)=>{e.exports=n(426)},787:t=>{t.exports=e}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var i=n[e]={exports:{}};return t[e](i,i.exports,r),i.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};return(()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t){var n=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,n||"default");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"===e(n)?n:String(n)}function n(e,n,r){return(n=t(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){if(e){if("string"===typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,u,c=[],l=!0,a=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){a=!0,o=e}finally{try{if(!l&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(a)throw o}}return c}}(e,t)||l(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}r.r(o),r.d(o,{OptionContext:()=>g,OptionDispatchContext:()=>m,default:()=>te,defaultOptions:()=>y,defaultStyle:()=>E,getBoundingClientRect:()=>w,getClinetXY:()=>P,getStroke:()=>G,getStrokeOutlinePoints:()=>W,getStrokePoints:()=>Z,getSvgPathFromStroke:()=>S,reducerOption:()=>b,useEvent:()=>C,useOptionDispatch:()=>j,useOptionStore:()=>O});var s=r(787),p={},d=(0,s.createContext)(p),v=(0,s.createContext)((function(){}));function h(e,t){return u(u({},e),t)}var y={size:6,smoothing:.46,thinning:.73,streamline:.5,easing:function(e){return e},start:{taper:0,easing:function(e){return e},cap:!0},end:{taper:0,easing:function(e){return e},cap:!0}},g=(0,s.createContext)(y),m=(0,s.createContext)((function(){}));function b(e,t){return u(u({},e),t)}var O=function(){return(0,s.useContext)(g)},j=function(){return(0,s.useContext)(m)};function x(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e){if(!e.length)return"";var t=e.reduce((function(e,t,n,r){var o=a(t,2),i=o[0],u=o[1],c=a(r[(n+1)%r.length],2),l=c[0],f=c[1];return e.push(i,u,(i+l)/2,(u+f)/2),e}),["M"].concat(x(e[0]),["Q"]));return t.push("Z"),t.join(" ")}var w=function(e){var t=null===e||void 0===e?void 0:e.getBoundingClientRect();return{offsetX:(null===t||void 0===t?void 0:t.left)||0,offsetY:(null===t||void 0===t?void 0:t.top)||0}},P=function(e){return{clientX:e.clientX,clientY:e.clientY}},E={"--w-signature-background":"#fff",touchAction:"none",position:"relative",width:"100%",height:"100%",backgroundColor:"var(--w-signature-background)"};function C(e){var t=(0,s.useRef)(e);return(0,s.useEffect)((function(){t.current=e})),(0,s.useCallback)((function(e){return t.current&&t.current(e)}),[])}var _=r(246),R=["className","prefixCls","style","readonly","onPointer","options","children"],k=(0,s.forwardRef)((function(e,t){var r=e.className,o=e.prefixCls,i=void 0===o?"w-signature":o,c=e.style,l=e.readonly,a=void 0!==l&&l,p=e.onPointer,d=(e.options,e.children),h=f(e,R),y=[r,i].filter(Boolean).join(" "),g=(0,s.useRef)(null),m=(0,s.useRef)(),b=(0,s.useRef)(),O=(0,s.useRef)(0),j=(0,s.useId)(),S=(0,s.useContext)(v);(0,s.useImperativeHandle)(t,(function(){return g.current}),[g.current]);var k=C((function(e){if(!a){O.current+=1;var t=w(g.current),r=t.offsetY,o=t.offsetX,i=e.clientX||e.nativeEvent.clientX,u=e.clientY||e.nativeEvent.clientY;b.current=[[i-o,u-r]];var c=document.createElementNS("http://www.w3.org/2000/svg","path");m.current=c,g.current.appendChild(c),S(n({},j+O.current,b.current))}})),M=C((function(e){if(m.current){var t=w(g.current),r=t.offsetY,o=t.offsetX,i=P(e),u=i.clientX,c=i.clientY;b.current=[].concat(x(b.current),[[u-o,c-r]]),S(n({},j+O.current,b.current))}})),A=C((function(){var t=b.current||[];p&&e.onPointer(t),m.current=void 0,b.current=void 0}));return(0,s.useEffect)((function(){if(!a)return document.addEventListener("pointermove",M),document.addEventListener("pointerup",A),function(){a||(document.removeEventListener("pointermove",M),document.removeEventListener("pointerup",A))}}),[]),(0,_.jsx)("svg",u(u({},h),{},{ref:g,className:y,onPointerDown:k,style:u(u({},E),c),children:d}))}));function M(e,t,n,r=(e=>e)){return e*r(.5-t*(.5-n))}function A(e,t){return[e[0]+t[0],e[1]+t[1]]}function I(e,t){return[e[0]-t[0],e[1]-t[1]]}function L(e,t){return[e[0]*t,e[1]*t]}function Y(e){return[e[1],-e[0]]}function D(e,t){return e[0]*t[0]+e[1]*t[1]}function X(e,t){return e[0]===t[0]&&e[1]===t[1]}function N(e,t){return function(e){return e[0]*e[0]+e[1]*e[1]}(I(e,t))}function T(e){return function(e,t){return[e[0]/t,e[1]/t]}(e,function(e){return Math.hypot(e[0],e[1])}(e))}function B(e,t){return Math.hypot(e[1]-t[1],e[0]-t[0])}function F(e,t,n){let r=Math.sin(n),o=Math.cos(n),i=e[0]-t[0],u=e[1]-t[1],c=i*r+u*o;return[i*o-u*r+t[0],c+t[1]]}function z(e,t,n){return A(e,L(I(t,e),n))}function U(e,t,n){return A(e,L(t,n))}var{min:$,PI:q}=Math,H=.275,Q=q+1e-4;function W(e,t={}){let{size:n=16,smoothing:r=.5,thinning:o=.5,simulatePressure:i=!0,easing:u=(e=>e),start:c={},end:l={},last:a=!1}=t,{cap:f=!0,easing:s=(e=>e*(2-e))}=c,{cap:p=!0,easing:d=(e=>--e*e*e+1)}=l;if(0===e.length||n<=0)return[];let v,h=e[e.length-1].runningLength,y=!1===c.taper?0:!0===c.taper?Math.max(n,h):c.taper,g=!1===l.taper?0:!0===l.taper?Math.max(n,h):l.taper,m=Math.pow(n*r,2),b=[],O=[],j=e.slice(0,10).reduce(((e,t)=>{let r=t.pressure;if(i){let o=$(1,t.distance/n),i=$(1,1-o);r=$(1,e+o*H*(i-e))}return(e+r)/2}),e[0].pressure),x=M(n,o,e[e.length-1].pressure,u),S=e[0].vector,w=e[0].point,P=w,E=w,C=P,_=!1;for(let T=0;T<e.length;T++){let{pressure:t}=e[T],{point:r,vector:c,distance:l,runningLength:a}=e[T];if(T<e.length-1&&h-a<3)continue;if(o){if(i){let e=$(1,l/n),r=$(1,1-e);t=$(1,j+e*H*(r-j))}x=M(n,o,t,u)}else x=n/2;void 0===v&&(v=x);let f=a<y?s(a/y):1,p=h-a<g?d((h-a)/g):1;x=Math.max(.01,x*Math.min(f,p));let R=(T<e.length-1?e[T+1]:e[T]).vector,k=T<e.length-1?D(c,R):1,X=null!==k&&k<0;if(D(c,S)<0&&!_||X){let e=L(Y(S),x);for(let t=1/13,n=0;n<=1;n+=t)E=F(I(r,e),r,Q*n),b.push(E),C=F(A(r,e),r,Q*-n),O.push(C);w=E,P=C,X&&(_=!0);continue}if(_=!1,T===e.length-1){let e=L(Y(c),x);b.push(I(r,e)),O.push(A(r,e));continue}let B=L(Y(z(R,c,k)),x);E=I(r,B),(T<=1||N(w,E)>m)&&(b.push(E),w=E),C=A(r,B),(T<=1||N(P,C)>m)&&(O.push(C),P=C),j=t,S=c}let R=e[0].point.slice(0,2),k=e.length>1?e[e.length-1].point.slice(0,2):A(e[0].point,[1,1]),X=[],B=[];if(1===e.length){if(!y&&!g||a){let e=U(R,T(Y(I(R,k))),-(v||x)),t=[];for(let n=1/13,r=n;r<=1;r+=n)t.push(F(e,R,2*Q*r));return t}}else{if(!(y||g&&1===e.length))if(f)for(let e=1/13,n=e;n<=1;n+=e){let e=F(O[0],R,Q*n);X.push(e)}else{let e=I(b[0],O[0]),t=L(e,.5),n=L(e,.51);X.push(I(R,t),I(R,n),A(R,n),A(R,t))}let t=Y(function(e){return[-e[0],-e[1]]}(e[e.length-1].vector));if(g||y&&1===e.length)B.push(k);else if(p){let e=U(k,t,x);for(let t=1/29,n=t;n<1;n+=t)B.push(F(e,k,3*Q*n))}else B.push(A(k,L(t,x)),A(k,L(t,.99*x)),I(k,L(t,.99*x)),I(k,L(t,x)))}return b.concat(B,O.reverse(),X)}function Z(e,t={}){var n;let{streamline:r=.5,size:o=16,last:i=!1}=t;if(0===e.length)return[];let u=.15+.85*(1-r),c=Array.isArray(e[0])?e:e.map((({x:e,y:t,pressure:n=.5})=>[e,t,n]));if(2===c.length){let e=c[1];c=c.slice(0,-1);for(let t=1;t<5;t++)c.push(z(c[0],e,t/4))}1===c.length&&(c=[...c,[...A(c[0],[1,1]),...c[0].slice(2)]]);let l=[{point:[c[0][0],c[0][1]],pressure:c[0][2]>=0?c[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],a=!1,f=0,s=l[0],p=c.length-1;for(let d=1;d<c.length;d++){let e=i&&d===p?c[d].slice(0,2):z(s.point,c[d],u);if(X(s.point,e))continue;let t=B(e,s.point);if(f+=t,d<p&&!a){if(f<o)continue;a=!0}s={point:e,pressure:c[d][2]>=0?c[d][2]:.5,vector:T(I(s.point,e)),distance:t,runningLength:f},l.push(s)}return l[0].vector=(null==(n=l[1])?void 0:n.vector)||[0,0],l}function G(e,t={}){return W(Z(e,t),t)}var J=["options"],K=function(){var e=(0,s.useContext)(d),t=(e.options,f(e,J));return(0,_.jsx)(s.Fragment,{children:Object.keys(t).map((function(e){return(0,_.jsx)(V,{data:t[e]},e)}))})},V=function(e){var t=e.data,n=S(G(void 0===t?[]:t,O()));return(0,_.jsx)(s.Fragment,{children:(0,_.jsx)("path",{d:n})})},ee=["children","options","defaultPoints"];const te=(0,s.forwardRef)((function(e,t){var n=e.children,r=e.options,o=e.defaultPoints,i=f(e,ee),c=a((0,s.useReducer)(h,Object.assign({},o)),2),l=c[0],p=c[1],O=a((0,s.useReducer)(b,Object.assign(u({},y),r)),2),j=O[0],x=O[1];return(0,s.useEffect)((function(){return x(u({},r))}),[r]),(0,_.jsx)(d.Provider,{value:l,children:(0,_.jsx)(v.Provider,{value:p,children:(0,_.jsxs)(k,u(u({},i),{},{ref:t,children:[(0,_.jsx)(g.Provider,{value:j,children:(0,_.jsx)(m.Provider,{value:x,children:(0,_.jsx)(K,{})})}),n]}))})})}))})(),o})()));