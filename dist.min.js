/*! For license information please see dist.min.js.LICENSE.txt */
!function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("react")):"function"===typeof define&&define.amd?define(["react"],t):"object"===typeof exports?exports["@uiw/react-signature"]=t(require("react")):e["@uiw/react-signature"]=t(e.React)}(self,(e=>(()=>{"use strict";var t={426:(e,t,r)=>{var n=r(787),o=Symbol.for("react.element"),i=Symbol.for("react.fragment"),u=Object.prototype.hasOwnProperty,l=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function a(e,t,r){var n,i={},a=null,f=null;for(n in void 0!==r&&(a=""+r),void 0!==t.key&&(a=""+t.key),void 0!==t.ref&&(f=t.ref),t)u.call(t,n)&&!c.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===i[n]&&(i[n]=t[n]);return{$$typeof:o,type:e,key:a,ref:f,props:i,_owner:l.current}}t.jsx=a},246:(e,t,r)=>{e.exports=r(426)},787:t=>{t.exports=e}},r={};function n(e){var o=r[e];if(void 0!==o)return o.exports;var i=r[e]={exports:{}};return t[e](i,i.exports,n),i.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};return(()=>{function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function t(t,r){if(t){if("string"===typeof t)return e(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(t,r):void 0}}function r(r){return function(t){if(Array.isArray(t))return e(t)}(r)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||t(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function u(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:String(t)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=u(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}n.r(o),n.d(o,{default:()=>B,defaultOptions:()=>I,defaultStyle:()=>X,getBoundingClientRect:()=>L,getClinetXY:()=>Y,getStroke:()=>M,getStrokeOutlinePoints:()=>k,getStrokePoints:()=>A,getSvgPathFromStroke:()=>C,useEvent:()=>N});var f=n(787);function s(e,t,r,n=(e=>e)){return e*n(.5-t*(.5-r))}function p(e,t){return[e[0]+t[0],e[1]+t[1]]}function v(e,t){return[e[0]-t[0],e[1]-t[1]]}function y(e,t){return[e[0]*t,e[1]*t]}function d(e){return[e[1],-e[0]]}function g(e,t){return e[0]*t[0]+e[1]*t[1]}function h(e,t){return e[0]===t[0]&&e[1]===t[1]}function m(e,t){return function(e){return e[0]*e[0]+e[1]*e[1]}(v(e,t))}function b(e){return function(e,t){return[e[0]/t,e[1]/t]}(e,function(e){return Math.hypot(e[0],e[1])}(e))}function O(e,t){return Math.hypot(e[1]-t[1],e[0]-t[0])}function S(e,t,r){let n=Math.sin(r),o=Math.cos(r),i=e[0]-t[0],u=e[1]-t[1],l=i*n+u*o;return[i*o-u*n+t[0],l+t[1]]}function j(e,t,r){return p(e,y(v(t,e),r))}function w(e,t,r){return p(e,y(t,r))}var{min:P,PI:E}=Math,x=.275,_=E+1e-4;function k(e,t={}){let{size:r=16,smoothing:n=.5,thinning:o=.5,simulatePressure:i=!0,easing:u=(e=>e),start:l={},end:c={},last:a=!1}=t,{cap:f=!0,easing:h=(e=>e*(2-e))}=l,{cap:O=!0,easing:E=(e=>--e*e*e+1)}=c;if(0===e.length||r<=0)return[];let k,A=e[e.length-1].runningLength,M=!1===l.taper?0:!0===l.taper?Math.max(r,A):l.taper,R=!1===c.taper?0:!0===c.taper?Math.max(r,A):c.taper,C=Math.pow(r*n,2),I=[],L=[],Y=e.slice(0,10).reduce(((e,t)=>{let n=t.pressure;if(i){let o=P(1,t.distance/r),i=P(1,1-o);n=P(1,e+o*x*(i-e))}return(e+n)/2}),e[0].pressure),X=s(r,o,e[e.length-1].pressure,u),N=e[0].vector,T=e[0].point,D=T,B=T,z=D,U=!1;for(let b=0;b<e.length;b++){let{pressure:t}=e[b],{point:n,vector:l,distance:c,runningLength:a}=e[b];if(b<e.length-1&&A-a<3)continue;if(o){if(i){let e=P(1,c/r),n=P(1,1-e);t=P(1,Y+e*x*(n-Y))}X=s(r,o,t,u)}else X=r/2;void 0===k&&(k=X);let f=a<M?h(a/M):1,O=A-a<R?E((A-a)/R):1;X=Math.max(.01,X*Math.min(f,O));let w=(b<e.length-1?e[b+1]:e[b]).vector,$=b<e.length-1?g(l,w):1,q=null!==$&&$<0;if(g(l,N)<0&&!U||q){let e=y(d(N),X);for(let t=1/13,r=0;r<=1;r+=t)B=S(v(n,e),n,_*r),I.push(B),z=S(p(n,e),n,_*-r),L.push(z);T=B,D=z,q&&(U=!0);continue}if(U=!1,b===e.length-1){let e=y(d(l),X);I.push(v(n,e)),L.push(p(n,e));continue}let F=y(d(j(w,l,$)),X);B=v(n,F),(b<=1||m(T,B)>C)&&(I.push(B),T=B),z=p(n,F),(b<=1||m(D,z)>C)&&(L.push(z),D=z),Y=t,N=l}let $=e[0].point.slice(0,2),q=e.length>1?e[e.length-1].point.slice(0,2):p(e[0].point,[1,1]),F=[],H=[];if(1===e.length){if(!M&&!R||a){let e=w($,b(d(v($,q))),-(k||X)),t=[];for(let r=1/13,n=r;n<=1;n+=r)t.push(S(e,$,2*_*n));return t}}else{if(!(M||R&&1===e.length))if(f)for(let e=1/13,r=e;r<=1;r+=e){let e=S(L[0],$,_*r);F.push(e)}else{let e=v(I[0],L[0]),t=y(e,.5),r=y(e,.51);F.push(v($,t),v($,r),p($,r),p($,t))}let t=d(function(e){return[-e[0],-e[1]]}(e[e.length-1].vector));if(R||M&&1===e.length)H.push(q);else if(O){let e=w(q,t,X);for(let t=1/29,r=t;r<1;r+=t)H.push(S(e,q,3*_*r))}else H.push(p(q,y(t,X)),p(q,y(t,.99*X)),v(q,y(t,.99*X)),v(q,y(t,X)))}return I.concat(H,L.reverse(),F)}function A(e,t={}){var r;let{streamline:n=.5,size:o=16,last:i=!1}=t;if(0===e.length)return[];let u=.15+.85*(1-n),l=Array.isArray(e[0])?e:e.map((({x:e,y:t,pressure:r=.5})=>[e,t,r]));if(2===l.length){let e=l[1];l=l.slice(0,-1);for(let t=1;t<5;t++)l.push(j(l[0],e,t/4))}1===l.length&&(l=[...l,[...p(l[0],[1,1]),...l[0].slice(2)]]);let c=[{point:[l[0][0],l[0][1]],pressure:l[0][2]>=0?l[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],a=!1,f=0,s=c[0],y=l.length-1;for(let p=1;p<l.length;p++){let e=i&&p===y?l[p].slice(0,2):j(s.point,l[p],u);if(h(s.point,e))continue;let t=O(e,s.point);if(f+=t,p<y&&!a){if(f<o)continue;a=!0}s={point:e,pressure:l[p][2]>=0?l[p][2]:.5,vector:b(v(s.point,e)),distance:t,runningLength:f},c.push(s)}return c[0].vector=(null==(r=c[1])?void 0:r.vector)||[0,0],c}function M(e,t={}){return k(A(e,t),t)}function R(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,u,l=[],c=!0,a=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){a=!0,o=e}finally{try{if(!c&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(a)throw o}}return l}}(e,r)||t(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e){if(!e.length)return"";var t=e.reduce((function(e,t,r,n){var o=R(t,2),i=o[0],u=o[1],l=R(n[(r+1)%n.length],2),c=l[0],a=l[1];return e.push(i,u,(i+c)/2,(u+a)/2),e}),["M"].concat(r(e[0]),["Q"]));return t.push("Z"),t.join(" ")}var I={size:6,smoothing:.46,thinning:.73,streamline:.5,easing:function(e){return e},start:{taper:0,easing:function(e){return e},cap:!0},end:{taper:0,easing:function(e){return e},cap:!0}},L=function(e){var t=null===e||void 0===e?void 0:e.getBoundingClientRect();return{offsetX:(null===t||void 0===t?void 0:t.left)||0,offsetY:(null===t||void 0===t?void 0:t.top)||0}},Y=function(e){return{clientX:e.clientX,clientY:e.clientY}},X={"--w-signature-background":"#fff",touchAction:"none",position:"relative",width:"100%",height:"100%",backgroundColor:"var(--w-signature-background)"};function N(e){var t=(0,f.useRef)(e);return(0,f.useEffect)((function(){t.current=e})),(0,f.useCallback)((function(e){return t.current&&t.current(e)}),[])}var T=n(246),D=["className","prefixCls","style","readonly","onPointer","options","children"];const B=(0,f.forwardRef)((function(e,t){var n=e.className,o=e.prefixCls,i=void 0===o?"w-signature":o,u=e.style,l=e.readonly,s=void 0!==l&&l,p=e.onPointer,v=e.options,y=e.children,d=a(e,D),g=[n,i].filter(Boolean).join(" "),h=(0,f.useRef)(null),m=(0,f.useRef)(),b=(0,f.useRef)();(0,f.useImperativeHandle)(t,(function(){return h.current}),[h.current]);var O=N((function(e){var t=L(h.current),r=t.offsetY,n=t.offsetX,o=e.clientX||e.nativeEvent.clientX,i=e.clientY||e.nativeEvent.clientY;b.current=[[o-n,i-r]];var u=document.createElementNS("http://www.w3.org/2000/svg","path");m.current=u,h.current.appendChild(u)})),S=N((function(e){if(m.current){var t,n=c(c({},I),v);console.log(n);var o=L(h.current),i=o.offsetY,u=o.offsetX,l=Y(e),a=l.clientX,f=l.clientY;b.current=[].concat(r(b.current),[[a-u,f-i]]);var s=C(M(b.current,n));null===(t=m.current)||void 0===t||t.setAttribute("d",s)}})),j=N((function(){var t=b.current||[];p&&e.onPointer(t),m.current=void 0,b.current=void 0}));return(0,f.useEffect)((function(){if(!s)return document.addEventListener("pointermove",S),document.addEventListener("pointerup",j),function(){s||(document.removeEventListener("pointermove",S),document.removeEventListener("pointerup",j))}}),[]),(0,T.jsx)("svg",c(c({},d),{},{ref:h,className:g,onPointerDown:O,style:c(c({},X),u),children:y}))}))})(),o})()));